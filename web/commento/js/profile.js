!function(){"use strict";void 0===window.commento&&(window.commento={}),window.commento.origin="[[[.Origin]]]",window.commento.cdn="[[[.CdnPrefix]]]"}(window,document),function(e,i){"use strict";e.paramGet=function(e){for(var t=decodeURIComponent(window.location.search.substring(1)).split("&"),o=0;o<t.length;o++){var n=t[o].split("=");if(n[0]===e)return void 0===n[1]||n[1]}return null},e.buttonDisable=function(e){$(e).attr("disabled",!0)},e.buttonEnable=function(e){$(e).attr("disabled",!1)},e.textSet=function(e,t){var o=$(e);o.show(),o.text(t)},e.unfilledMark=function(e,t){for(var o=0;o<e.length;o++){var n=$(e[o]);""===n.val()&&t(n)}return!0},e.cookieGet=function(e){var t=("; "+i.cookie).split("; "+e+"=");if(2===t.length)return t.pop().split(";").shift()},e.cookieSet=function(e,t){var o=new Date;o.setTime(o.getTime()+31536e6);var n=e+"="+t+("; expires="+o.toUTCString())+"; path=/";/^https:\/\//i.test(origin)&&(n+="; secure"),i.cookie=n},e.cookieDelete=function(e){i.cookie=e+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;"},e.timeSince=function(e){var t=Math.floor((new Date-e)/1e3),o=Math.floor(t/31536e3);return 1<o?o+" years ago":1<(o=Math.floor(t/2592e3))?o+" months ago":1<(o=Math.floor(t/86400))?o+" days ago":1<(o=Math.floor(t/3600))?o+" hours ago":1<(o=Math.floor(t/60))?o+" minutes ago":5<t?Math.floor(t)+" seconds ago":"just now"}}(window.commento,document),function(e){"use strict";e.post=function(e,t,o){$.ajax({url:e,type:"POST",data:JSON.stringify(t),success:function(e){var t=JSON.parse(e);o(t)}})},e.get=function(e,o){$.ajax({url:e,type:"GET",success:function(e){var t=JSON.parse(e);o(t)}})}}(window.commento,document),function(o){"use strict";o.update=function(e){if(e.preventDefault(),$(".err").text(""),$(".msg").text(""),o.unfilledMark(["#name","#email"],function(e){e.css("border-bottom","1px solid red")})){var t={commenterToken:o.paramGet("commenterToken"),name:$("#name").val(),email:$("#email").val(),link:$("#link").val(),photo:$("#photo").val()};o.buttonDisable("#save-button"),o.post(o.origin+"/api/commenter/update",t,function(e){o.buttonEnable("#save-button"),e.success?$(".msg").text("Successfully updated!"):$(".err").text(e.message)})}else o.textSet("#err","Please make sure all fields are filled")},o.profilePrefill=function(){$(".err").text(""),$(".msg").text("");var e={commenterToken:o.paramGet("commenterToken")};o.post(o.origin+"/api/commenter/self",e,function(e){$("#loading").hide(),$("#form").show(),e.success?($("#name").val(e.commenter.name),$("#email").val(e.commenter.email),$("#unsubscribe").attr("href",o.origin+"/unsubscribe?unsubscribeSecretHex="+e.email.unsubscribeSecretHex),"commento"===e.commenter.provider&&($("#link-row").attr("style",""),"undefined"!==e.commenter.link&&$("#link").val(e.commenter.link),$("#photo-row").attr("style",""),$("#photo-subtitle").attr("style",""),"undefined"!==e.commenter.photo&&$("#photo").val(e.commenter.photo))):$(".err").text(e.message)})}}(window.commento,document);